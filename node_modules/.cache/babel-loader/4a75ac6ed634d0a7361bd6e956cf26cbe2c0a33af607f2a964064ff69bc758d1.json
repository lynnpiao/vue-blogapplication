{"ast":null,"code":"import axios from \"axios\";\nexport default {\n  data() {\n    return {\n      searchForm: {\n        firstName: \"\"\n      },\n      blogUsers: []\n    };\n  },\n  created() {\n    // Fetch data when the component is created\n    const storedFirstName = localStorage.getItem('firstName');\n    if (storedFirstName) {\n      // Use the stored value\n      this.searchForm.firstName = storedFirstName;\n    } else {\n      // Fetch firstName from API\n      this.fetchData();\n    }\n\n    // this.fetchData();\n  },\n  methods: {\n    onSubmit() {\n      this.fetchData(this.searchForm.firstName);\n    },\n    fetchData() {\n      // Fetch data from an API using Axios\n      //Yapi: get request test address: https://yapi.pro/mock/370002/findBlogUsers\n      // /findBlogUsers\n      axios.get(\"https://yapi.pro/mock/370002/findBlogUsers\", {\n        params: {\n          firstName: this.searchForm.firstName\n        }\n      }).then(response => {\n        // Assign fetched data to blogUser array\n\n        //   console.log(response.data.data[0]);\n        this.blogUsers = response.data.data;\n        localStorage.setItem('firstName', response.data.data[0].firstName);\n      }).catch(error => {\n        // Handle errors\n        console.error(\"Error fetching data:\", error);\n      });\n    }\n    // navigateToBlogPosts(userName) {\n    //   this.$router.push({ name: 'findBlogPosts', query: { userName: userName } });\n    // }\n  },\n  beforeRouteEnter(to, from, next) {\n    // Fetch data before entering the route\n    next(vm => {\n      vm.fetchData();\n    });\n  },\n  beforeRouteUpdate(to, from, next) {\n    // Refetch data when the route parameters change\n    this.fetchData();\n    next();\n  }\n};","map":{"version":3,"names":["axios","data","searchForm","firstName","blogUsers","created","storedFirstName","localStorage","getItem","fetchData","methods","onSubmit","get","params","then","response","setItem","catch","error","console","beforeRouteEnter","to","from","next","vm","beforeRouteUpdate"],"sources":["src/views/FindBlogUsersView.vue"],"sourcesContent":["<template>\n  <el-container>\n    <el-header class=\"custom-header\">Search BlogUsers by FirstName</el-header>\n    <el-main>\n      <h2>Search BlogUsers</h2>\n      <el-form :inline=\"true\" :model=\"searchForm\" class=\"demo-form-inline\">\n        <el-form-item label=\"firstName\">\n          <el-input v-model=\"searchForm.firstName\"></el-input>\n        </el-form-item>\n\n        <el-form-item>\n          <el-button type=\"primary\" @click=\"onSubmit\">Submit</el-button>\n        </el-form-item>\n      </el-form>\n      <br />\n      <br />\n      <el-table :data=\"blogUsers\" border style=\"width: 100%\">\n        <el-table-column prop=\"userName\" label=\"UserName\" width=\"fit-content\">\n        </el-table-column>\n        <el-table-column prop=\"firstName\" label=\"FirstName\" width=\"fit-content\">\n        </el-table-column>\n        <el-table-column prop=\"lastName\" label=\"LastName\" width=\"fit-content\">\n        </el-table-column>\n        <el-table-column prop=\"dob\" label=\"DoB\" width=\"fit-content\">\n        </el-table-column>\n        <el-table-column label=\"BlogPosts\" width=\"fit-content\">\n          <template v-slot:default=\"table\">\n            <router-link\n              :to=\"{\n                name: 'findBlogPosts',\n                query: { userName: table.row.userName },\n              }\"\n            >\n              <el-button type=\"text\" size=\"mini\">\n                Find\n                <i class=\"el-icon-edit\" />\n              </el-button>\n            </router-link>\n          </template>\n        </el-table-column>\n\n        <el-table-column label=\"BlogComments\" width=\"fit-content\">\n          <template v-slot:default=\"table\">\n            <router-link\n              :to=\"{\n                name: 'findBlogComments',\n                query: { userName: table.row.userName },\n              }\"\n            >\n              <el-button type=\"text\" size=\"mini\">\n                Find\n                <i class=\"el-icon-edit\" />\n              </el-button>\n            </router-link>\n          </template>\n        </el-table-column>\n\n        <el-table-column label=\"Delete BlogUser\" width=\"fit-content\">\n          <template v-slot:default=\"table\">\n            <router-link\n              :to=\"{\n                name: 'deleteBlogUser',\n                query: { userName: table.row.userName },\n              }\"\n            >\n              <el-button type=\"text\" size=\"mini\">\n                Delete\n                <i class=\"el-icon-edit\" />\n              </el-button>\n            </router-link>\n          </template>\n        </el-table-column>\n\n        <el-table-column label=\"Update BlogUser\" width=\"fit-content\">\n          <template v-slot:default=\"table\">\n            <router-link\n              :to=\"{\n                name: 'updateLastName',\n                query: { userName: table.row.userName },\n              }\"\n            >\n              <el-button type=\"text\" size=\"mini\">\n                Update\n                <i class=\"el-icon-edit\" />\n              </el-button>\n            </router-link>\n          </template>\n        </el-table-column>\n      </el-table>\n\n      <br /><br />\n      <h2>Create New BlogUser</h2>\n      <router-link\n        :to=\"{\n          name: 'createBlogUser',\n        }\"\n      >\n        <el-button type=\"text\" size=\"mini\">\n          CreateBlogUser\n          <i class=\"el-icon-edit\" />\n        </el-button>\n      </router-link>\n    </el-main>\n  </el-container>\n</template>\n\n\n<script>\nimport axios from \"axios\";\n\nexport default {\n  data() {\n    return {\n      searchForm: {\n        firstName: \"\",\n      },\n      blogUsers: [],\n    };\n  },\n  created() {\n    // Fetch data when the component is created\n    const storedFirstName = localStorage.getItem('firstName');\n\n    if (storedFirstName) {\n      // Use the stored value\n      this.searchForm.firstName = storedFirstName;\n\n    } else {\n      // Fetch firstName from API\n      this.fetchData();\n    }\n\n    // this.fetchData();\n  },\n  methods: {\n    onSubmit() {\n      this.fetchData(this.searchForm.firstName);\n    },\n    fetchData() {\n      // Fetch data from an API using Axios\n      //Yapi: get request test address: https://yapi.pro/mock/370002/findBlogUsers\n      // /findBlogUsers\n      axios\n        .get(\"https://yapi.pro/mock/370002/findBlogUsers\", {\n          params: {\n            firstName: this.searchForm.firstName,\n          },\n        })\n        .then((response) => {\n          // Assign fetched data to blogUser array\n        \n        //   console.log(response.data.data[0]);\n          this.blogUsers = response.data.data;\n          localStorage.setItem('firstName', response.data.data[0].firstName);\n        })\n        .catch((error) => {\n          // Handle errors\n          console.error(\"Error fetching data:\", error);\n        });\n    },\n    // navigateToBlogPosts(userName) {\n    //   this.$router.push({ name: 'findBlogPosts', query: { userName: userName } });\n    // }\n  },\n  beforeRouteEnter(to, from, next) {\n    // Fetch data before entering the route\n    next(vm => {\n      vm.fetchData();\n    });\n  },\n  beforeRouteUpdate(to, from, next) {\n    // Refetch data when the route parameters change\n    this.fetchData();\n    next();\n  }\n};\n</script>\n\n<style>\n.custom-header {\n  /* background-color: #409EFF; */\n  color: black;\n  font-size: 30px;\n  font-weight: bold;\n  font-family: Arial, sans-serif;\n}\n</style>"],"mappings":"AA4GA,OAAAA,KAAA;AAEA;EACAC,KAAA;IACA;MACAC,UAAA;QACAC,SAAA;MACA;MACAC,SAAA;IACA;EACA;EACAC,QAAA;IACA;IACA,MAAAC,eAAA,GAAAC,YAAA,CAAAC,OAAA;IAEA,IAAAF,eAAA;MACA;MACA,KAAAJ,UAAA,CAAAC,SAAA,GAAAG,eAAA;IAEA;MACA;MACA,KAAAG,SAAA;IACA;;IAEA;EACA;EACAC,OAAA;IACAC,SAAA;MACA,KAAAF,SAAA,MAAAP,UAAA,CAAAC,SAAA;IACA;IACAM,UAAA;MACA;MACA;MACA;MACAT,KAAA,CACAY,GAAA;QACAC,MAAA;UACAV,SAAA,OAAAD,UAAA,CAAAC;QACA;MACA,GACAW,IAAA,CAAAC,QAAA;QACA;;QAEA;QACA,KAAAX,SAAA,GAAAW,QAAA,CAAAd,IAAA,CAAAA,IAAA;QACAM,YAAA,CAAAS,OAAA,cAAAD,QAAA,CAAAd,IAAA,CAAAA,IAAA,IAAAE,SAAA;MACA,GACAc,KAAA,CAAAC,KAAA;QACA;QACAC,OAAA,CAAAD,KAAA,yBAAAA,KAAA;MACA;IACA;IACA;IACA;IACA;EACA;EACAE,iBAAAC,EAAA,EAAAC,IAAA,EAAAC,IAAA;IACA;IACAA,IAAA,CAAAC,EAAA;MACAA,EAAA,CAAAf,SAAA;IACA;EACA;EACAgB,kBAAAJ,EAAA,EAAAC,IAAA,EAAAC,IAAA;IACA;IACA,KAAAd,SAAA;IACAc,IAAA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}